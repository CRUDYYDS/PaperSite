<!-- src/app/features/paper-detail/paper-detail.component.html -->
<div class="paper-detail-container" *ngIf="paper">
  <!-- è®ºæ–‡ä¿¡æ¯å¤´éƒ¨ -->
  <div class="paper-header">
    <div class="header-content">
      <h1>{{paper.title}}</h1>
      <div class="authors">
        <strong>ä½œè€…ï¼š</strong>
        <span *ngFor="let author of paper.authors; let last = last">
          {{author}}<span *ngIf="!last">, </span>
        </span>
      </div>
      <div class="meta">
        <span class="category">
          <i class="icon">ğŸ·ï¸</i>
          åˆ†ç±»ï¼š{{paper.category}}
        </span>
        <span class="date">
          <i class="icon">ğŸ“…</i>
          å‘å¸ƒï¼š{{paper.publishDate | date:'yyyy-MM-dd'}}
        </span>
        <span class="size">
          <i class="icon">ğŸ“¦</i>
          å¤§å°ï¼š{{paper.fileSize | filesize}}
        </span>
        <span class="downloads">
          <i class="icon">ğŸ“¥</i>
          ä¸‹è½½ï¼š{{paper.downloadCount}} æ¬¡
        </span>
      </div>
    </div>
    
    <div class="header-actions">
      <button (click)="downloadPaper()" class="btn btn-primary">
        ğŸ“¥ ä¸‹è½½è®ºæ–‡
      </button>
      <button (click)="goBack()" class="btn btn-secondary">
        â† è¿”å›
      </button>
    </div>
  </div>

  <!-- è§†å›¾åˆ‡æ¢é€‰é¡¹å¡ -->
  <div class="view-tabs">
    <button 
      class="tab-btn"
      [class.active]="currentView === 'info'"
      (click)="switchView('info')">
      ğŸ“‹ è®ºæ–‡ä¿¡æ¯
    </button>
    <button 
      class="tab-btn"
      [class.active]="currentView === 'preview'"
      (click)="switchView('preview')">
      ğŸ“„ PDFé¢„è§ˆ
    </button>
  </div>

  <!-- è®ºæ–‡ä¿¡æ¯è§†å›¾ -->
  <div class="paper-content" [class.hidden]="currentView !== 'info'">
    <div class="info-section">
      <div class="abstract" *ngIf="paper.abstract">
        <h3>ğŸ“„ æ‘˜è¦</h3>
        <p class="abstract-text">{{paper.abstract}}</p>
      </div>
      
      <div class="keywords" *ngIf="paper.keywords?.length">
        <h3>ğŸ·ï¸ å…³é”®è¯</h3>
        <div class="keyword-tags">
          <span *ngFor="let keyword of paper.keywords" class="keyword">{{keyword}}</span>
        </div>
      </div>

      <div class="paper-details">
        <h3>ğŸ“Š è¯¦ç»†ä¿¡æ¯</h3>
        <div class="details-grid">
          <div class="detail-item">
            <label>æ–‡ä»¶å</label>
            <span>{{paper.fileName}}</span>
          </div>
          <div class="detail-item">
            <label>å­˜å‚¨ä»“åº“</label>
            <span>{{paper.repository}}</span>
          </div>
          <div class="detail-item">
            <label>æ–‡ä»¶è·¯å¾„</label>
            <span class="file-path">{{paper.filePath}}</span>
          </div>
          <div class="detail-item">
            <label>ä¸Šä¼ æ—¶é—´</label>
            <span>{{paper.createdAt | date:'yyyy-MM-dd HH:mm:ss'}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PDFé¢„è§ˆè§†å›¾ -->
  <div class="pdf-preview-section" [class.hidden]="currentView !== 'preview'">
    <div class="preview-container">
      <app-pdf-viewer 
        [pdfUrl]="getPdfUrl()"
        [showToolbar]="true">
      </app-pdf-viewer>
    </div>
  </div>
</div>

<!-- åŠ è½½çŠ¶æ€ -->
<div class="loading-container" *ngIf="!paper && !error">
  <app-loading message="æ­£åœ¨åŠ è½½è®ºæ–‡è¯¦æƒ…..."></app-loading>
</div>

<!-- é”™è¯¯çŠ¶æ€ -->
<div class="error-container" *ngIf="error">
  <div class="error-content">
    <div class="error-icon">âŒ</div>
    <h2>åŠ è½½å¤±è´¥</h2>
    <p>{{error}}</p>
    <div class="error-actions">
      <button (click)="reloadPaper()" class="btn btn-primary">ğŸ”„ é‡æ–°åŠ è½½</button>
      <button (click)="goBack()" class="btn btn-secondary">â† è¿”å›åˆ—è¡¨</button>
    </div>
  </div>
</div>